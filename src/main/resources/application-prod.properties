# Production specific properties

# Database
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# File storage for production
fileflow.storage.location=${STORAGE_LOCATION:/data/fileflow-storage}

# Use MinIO by default for production
app.storage.strategy=${STORAGE_STRATEGY:minio}

# Logging configuration
logging.level.com.fileflow=${LOG_LEVEL_FILEFLOW:INFO}
logging.level.org.springframework.web=${LOG_LEVEL_SPRING_WEB:INFO}
logging.level.org.springframework.security=${LOG_LEVEL_SPRING_SECURITY:INFO}
logging.level.org.hibernate.SQL=${LOG_LEVEL_HIBERNATE_SQL:ERROR}
logging.file.name=${LOG_FILE_NAME:/app/logs/fileflow.log}
logging.file.max-size=100MB
logging.file.max-history=30

# Production mail configuration
spring.mail.host=${MAIL_HOST}
spring.mail.port=${MAIL_PORT}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=${MAIL_SMTP_AUTH:true}
spring.mail.properties.mail.smtp.starttls.enable=${MAIL_SMTP_STARTTLS:true}

# Firebase configuration for production
app.firebase.enabled=${FIREBASE_ENABLED:true}
app.firebase.config-file=${FIREBASE_CONFIG_FILE:/app/config/firebase-service-account.json}

# Production database connection pool settings
spring.datasource.hikari.maximum-pool-size=${HIKARI_MAX_POOL_SIZE:10}
spring.datasource.hikari.minimum-idle=${HIKARI_MIN_IDLE:5}
spring.datasource.hikari.idle-timeout=${HIKARI_IDLE_TIMEOUT:30000}
spring.datasource.hikari.pool-name=FileFlowHikariCP
spring.datasource.hikari.connection-timeout=${HIKARI_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.max-lifetime=${HIKARI_MAX_LIFETIME:1800000}

# Redis configuration for production
spring.data.redis.host=${REDIS_HOST:redis}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD}
spring.cache.type=${CACHE_TYPE:redis}

# SSL configuration
server.ssl.enabled=${SSL_ENABLED:false}
server.ssl.key-store=${SSL_KEYSTORE_PATH:}
server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD:}
server.ssl.key-store-type=${SSL_KEYSTORE_TYPE:PKCS12}
server.ssl.key-alias=${SSL_KEY_ALIAS:fileflow}

# Security headers
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,application/javascript,application/json
server.compression.min-response-size=1024

# Set secure flag for cookies
server.servlet.session.cookie.secure=${COOKIE_SECURE:true}
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.same-site=Lax

# Actuator for production - limited exposure
management.endpoints.web.exposure.include=${ACTUATOR_ENDPOINTS:health,info,metrics}
management.endpoint.health.show-details=never

# Rate limiting for production
app.rate-limiting.enabled=${RATE_LIMITING_ENABLED:true}
app.rate-limiting.limit=${RATE_LIMITING_LIMIT:100}
app.rate-limiting.duration=${RATE_LIMITING_DURATION:3600}

# Disable development features
app.dev-mode=false
springdoc.swagger-ui.enabled=${SWAGGER_ENABLED:false}

# Async task configuration for improved performance
spring.task.execution.pool.core-size=${TASK_POOL_CORE_SIZE:2}
spring.task.execution.pool.max-size=${TASK_POOL_MAX_SIZE:10}
spring.task.execution.pool.queue-capacity=${TASK_POOL_QUEUE_CAPACITY:100}